<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>TGCS Simulation Discussion - Research - Maarten Afschrift</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/pages/tgcs-simulation-discussion.html">

        <meta name="author" content="Maarten Afschrift" />
        <meta name="description" content="This page contains additional content for the simulation discussion session on TGCS 2021: Simulation of walking with added mass to validate predictive simulations of human walking. You can download the slides from my presentation here: https://kuleuven-my.sharepoint.com/:b:/g/personal/u0088756_kuleuven_be/EVGjjj8d4LFBj-UUAyE9LoIBxWPhw86XkEO5xBQ5g7gW2g?e=iOpuQp if this is helpfull …" />

    <meta property="og:site_name" content="Research - Maarten Afschrift" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="TGCS Simulation Discussion"/>
    <meta property="og:url" content="/pages/tgcs-simulation-discussion.html"/>
    <meta property="og:description" content="This page contains additional content for the simulation discussion session on TGCS 2021: Simulation of walking with added mass to validate predictive simulations of human walking. You can download the slides from my presentation here: https://kuleuven-my.sharepoint.com/:b:/g/personal/u0088756_kuleuven_be/EVGjjj8d4LFBj-UUAyE9LoIBxWPhw86XkEO5xBQ5g7gW2g?e=iOpuQp if this is helpfull …" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>



</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
Research - Maarten Afschrift            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="/pages/curriculum-vitae.html">
                             Curriculum vitae
                          </a></li>
                         <li class="active"><a href="/pages/tgcs-simulation-discussion.html">
                             TGCS Simulation Discussion
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content" class="body">
        <h1 class="entry-title">TGCS Simulation Discussion</h1>
        
        <div class="entry-content">
            <p>This page contains additional content for the simulation discussion session on TGCS 2021: <strong>Simulation of walking with added mass to validate predictive simulations of human walking</strong>. You can download the slides from my presentation here: <a href="https://kuleuven-my.sharepoint.com/:b:/g/personal/u0088756_kuleuven_be/EVGjjj8d4LFBj-UUAyE9LoIBxWPhw86XkEO5xBQ5g7gW2g?e=iOpuQp">https://kuleuven-my.sharepoint.com/:b:/g/personal/u0088756_kuleuven_be/EVGjjj8d4LFBj-UUAyE9LoIBxWPhw86XkEO5xBQ5g7gW2g?e=iOpuQp</a> if this is helpfull for the discussion session.</p>
<h2>Simulation discussion: open questions</h2>
<p><img src="/images/Qf_TGCS_Disc.svg"
     alt="First question simulation discussion"
     style="float: left; margin-right: 10px;" /></p>
<p><img src="/images/Qs_TGCS_Disc.svg"
     alt="First question simulation discussion"
     style="float: left; margin-right: 10px;" /></p>
<h2>Overview optimization problem</h2>
<p>The predictive simulations are based on Falisse 2019 (<a href="https://doi.org/10.1098/rsif.2019.0402">https://doi.org/10.1098/rsif.2019.0402</a>) with matlab implementation (<a href="https://github.com/antoinefalisse/3dpredictsim">https://github.com/antoinefalisse/3dpredictsim</a>). The musculoskeletal model is based on Hamner (<a href="https://simtk-confluence.stanford.edu/display/OpenSim/Full+Body+Running+Model">https://simtk-confluence.stanford.edu/display/OpenSim/Full+Body+Running+Model</a>) and is implemented in opensim (<a href="https://simtk.org/projects/opensim">https://simtk.org/projects/opensim</a>).</p>
<p>states:</p>
<ul>
<li>muscle activations</li>
<li>muscle force</li>
<li>joint angles</li>
<li>angular velocties</li>
</ul>
<p>controls:</p>
<ul>
<li>time derivative muscle activation</li>
<li>time derivative muscle force</li>
<li>joint accelerations</li>
</ul>
<p>static optimization variables:</p>
<ul>
<li>final simulation time</li>
</ul>
<p>cost function:</p>
<ul>
<li>excitations squared</li>
<li>Activation squared</li>
<li>Metabolic energy computed with a smooth version of Bhargava 2004</li>
<li>Joint accelerations</li>
<li>Passive forces (i.e. coordinate limit forces that generate a torque at extreme joint angles. These forces respresent ligaments)</li>
<li>Torque actuators (torques generated by ideal actuators at joint that are not spanned by muscles: shoulder and elbow)</li>
<li>(Slack controls for time derivative of normalized muscle force)</li>
<li>(Slack controls for implicit activation dynamics)</li>
</ul>
<p>dynamic constraints:</p>
<ul>
<li>activation dynamics</li>
<li>contraction dynamics</li>
<li>skeleton dynamics</li>
</ul>
<p>path constraints:</p>
<ul>
<li>Average walking speed</li>
<li>Symmetric walking motion (we simulate half a gait cycle)</li>
<li>Kinematic constraint to prevent penetration left and right leg during midswing.</li>
</ul>
<p>We used matlab to create NLP with the casadi API <a href="https://web.casadi.org/">https://web.casadi.org/</a> and solved the problem with IPOPT.</p>
<h2>Simulations with added mass</h2>
<p>We simulated the experiments of two papers that evaluated the effect of added mass on the kinematics and energetics of human movemement.</p>
<ol>
<li>The effects of adding mass to the legs on the energetics and biomechanics of walking (<a href="https://doi.org/10.1249/mss.0b013e31802b3562">https://doi.org/10.1249/mss.0b013e31802b3562</a>)</li>
<li>Metabolic rate of carrying added mass: a function of walking speed, carried mass and mass location (<a href="https://doi.org/10.1016/j.apergo.2014.04.009">https://doi.org/10.1016/j.apergo.2014.04.009</a>)</li>
</ol>
<h3>Reference walking simulations</h3>
<p>Animation of simulated walking pattern without added mass (Reference walking). </p>
<video src="/images/Reference.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/Reference_frontal.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<p>This figures gives a detailed comparison between motion capture data (inverse analysis) and the predictive simulations without added mass.</p>
<p>Joint kinematics:
<img src="/images/Kinematics_Ref.svg"
     alt="First question simulation discussion"
     style="float: left; margin-right: 10px;" /></p>
<p>Joint kinetics:
<img src="/images/Kinetics_Ref.svg"
     alt="First question simulation discussion"
     style="max-width:100%;" /></p>
<p>ADD FIGURE HERE</p>
<h3>Comparsion influence added mass</h3>
<p>Comparison of simulations with added mass:</p>
<ul>
<li>
<p>black: Reference walking</p>
</li>
<li>
<p>blue: 4kg added to each foot</p>
</li>
<li>
<p>green: 4kg added to each tibia</p>
</li>
<li>
<p>red: 4kg added to each femur</p>
</li>
<li>
<p>gray: 16kg added to the pelvis</p>
</li>
</ul>
<video src="/images/AddedMass_Sagital.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/AddedMass_Frontal2.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>Added mass to the foot</h3>
<p>4kg added to each foot:</p>
<video src="/images/Foot4.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/Foot4_Front.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>Added mass to Tibia</h3>
<p>4kg added to each tibia (as in Browning 2008):</p>
<video src="/images/Tibia4.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/Tibia4_front.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>Added mass to Femur</h3>
<p>4kg added to each femur </p>
<video src="/images/Femur4.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/Femur4_Front.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>Added mass to Pelvis</h3>
<p>16kg added to the pelvis</p>
<video src="/images/Pelvis16.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<video src="/images/Pelvis16_Front.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>Added mass to Ankle: walking speed</h3>
<p>2kg kg added to each ankle, walking at 4km/h</p>
<video src="/images/Ankle2_4kmh.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<p>2kg kg added to each ankle, walking at 5km/h</p>
<video src="/images/Ankle2_5kmh.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<p>2kg kg added to each ankle, walking at 6km/h</p>
<video src="/images/Ankle2_6kmh.mp4" height="500" controls>
Your browser does not support the video tag.</video>

<h3>detailed figures effect added mass</h3>
<p>Joint kinematics:
<img src="/images/Kinematics_Browning.svg"
     alt="First question simulation discussion"
     style="float: left; margin-right: 10px;" /></p>
<p>Joint kinetics:
<img src="/images/Kinetics_Browning.svg"
     alt="First question simulation discussion"
     style="max-width:100%;" /></p>
<h3>My thoughts on simplications in modelling</h3>
<p>My current simulations approach can predict the effect of added mass on metabolic energy consumption reasonable well, but fails the predict the effect on metabolic energy consumption. My current list on the most important modelling simplifications (and how we could test them). Anyone other idea's ?</p>
<p>Modelling control:</p>
<ul>
<li>(Robust) feedback control is needed to simulate some important features in walking, such as the co-activation of the vasti and the biceps femoris before heelcontact (assumed to stiffen the knee and provide stability before the uncertain interaction with the ground).</li>
<li>We have the objective function wrong.</li>
</ul>
<p>Modelling musculoskeletal dynamics:</p>
<ul>
<li>Errors in simulating ankle kinematic have a large influence on muscle states and metabolic energy consumption. Use an invers skeleton dynamics approach and solve the muscle redundancy problem to evaluate if the errors in kinematics can explain the error in predicted muscle states and metabolic energy consumption.</li>
</ul>
<p>Computing metabolic energy:</p>
<ul>
<li>Current energy models (Bhargava, Umberger) predict very high muscle efficiencies. We predict more realistic incraeses in metabolic energy with added mass when using a model with 25% efficiency for positive work and 120% efficiency for negative work (but this model largely overstimates the COT during normal walking without added mass).</li>
</ul>
<p>Experiment:</p>
<ul>
<li>Subjects are not fully adapated to walking with added mass (7-10 minutes adaptation in experiment) and therefore have a higher metabolic cost compared to simulations.</li>
</ul>
<h3>My thoughts on other benchmark tests to evaluate predictive validity (of walking simulations)</h3>
<p>mechanical interventions:</p>
<ul>
<li>Walking with added mass</li>
<li>walking at various speeds</li>
<li>imposing stride frequency</li>
<li>....</li>
</ul>
<p>outcomes:</p>
<ul>
<li>Kinematics (motion capture)</li>
<li>Ground reaction forces (force plate)</li>
<li>mucle activity (EMG)</li>
<li>metabolic energy consumption (O2, CO2)</li>
<li>muscle fiber kinematics (ultrasound)</li>
</ul>
        </div>
    </section>
        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="/images//PasFoto.jpg"/>
        </p>
    <p>
      <strong>About Maarten Afschrift</strong><br/>
        Biomechanics, musculoskeletal modelling, wearable robotics.
    </p>
</div><!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://github.com/MaartenAfschrift/"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
    <li class="list-group-item"><a href="https://twitter.com/mafschrift"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://gbiomed.kuleuven.be/english/research/50000737/groups/HMB/" target="_blank">KU Leuven HBM</a>
    </li>
    <li class="list-group-item">
      <a href="https://research.vu.nl/en/persons/maarten-afschrift" target="_blank">VU Amsterdam</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy;  Maarten Afschrift
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>




</body>
</html>